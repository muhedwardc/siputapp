(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-86b12d54"],{6078:function(e,t,a){},bde8:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",{staticClass:"managers solid-container pa-4",staticStyle:{background:"white"},attrs:{column:""}},[a("app-loading"),e.$store.state.loadViewContent?e._e():[a("h3",{staticClass:"mb-4"},[e._v("Pengurus Departemen")]),a("v-layout",{attrs:{"align-center":""}},[a("h3",{staticClass:"ma-0 mr-2"},[e._v("Kepala Departemen")]),a("v-icon",{attrs:{small:""},on:{click:e.editKadep}},[e._v("edit")])],1),a("p",{staticClass:"ma-0",domProps:{textContent:e._s(e.kadep&&e.kadep.nama?e.kadep.nama:"Kepala departemen belum dipilih.")}}),e.editingKadep?a("v-layout",[a("v-autocomplete",{attrs:{"return-object":"","item-text":"nama",placeholder:"Cari Dosen",items:e.dosen,loading:e.loading,"no-data-text":"Data tidak ditemukan","search-input":e.search},on:{"update:searchInput":function(t){e.search=t},"update:search-input":function(t){e.search=t}},model:{value:e.kadepTemp,callback:function(t){e.kadepTemp=t},expression:"kadepTemp"}}),!e.kadep||e.kadepTemp&&e.kadep.user!==e.kadepTemp.id&&!e.isDuplicate(0)?[a("v-btn",{staticClass:"error",attrs:{disabled:e.assigning},on:{click:e.reset}},[e._v("batal")]),e.kadepTemp&&e.kadepTemp.id?a("v-btn",{staticClass:"primary",attrs:{loading:e.assigning},on:{click:function(t){return e.assignDosen("Kepala Departemen",e.kadepTemp.id)}}},[e._v("simpan")]):e._e()]:e._e()],2):e._e(),e.isDuplicate(0)?a("p",{staticClass:"red--text"},[e._v("Dosen ini telah didaftarkan menjadi Sekretaris.")]):e._e(),a("v-layout",{staticClass:"mt-2",attrs:{"align-center":""}},[a("h3",{staticClass:"ma-0 mr-2"},[e._v("Sekretaris Departemen")]),a("v-icon",{attrs:{small:""},on:{click:e.editSekretaris}},[e._v("edit")])],1),a("p",{staticClass:"ma-0",domProps:{textContent:e._s(e.sekretaris&&e.sekretaris.nama?e.sekretaris.nama:"Sekretaris departemen belum dipilih.")}}),e.editingSekretaris?a("v-layout",[a("v-autocomplete",{attrs:{"return-object":"","item-text":"nama",placeholder:"Cari Dosen",items:e.dosen,loading:e.loading,"no-data-text":"Data tidak ditemukan","search-input":e.search},on:{"update:searchInput":function(t){e.search=t},"update:search-input":function(t){e.search=t}},model:{value:e.sekretarisTemp,callback:function(t){e.sekretarisTemp=t},expression:"sekretarisTemp"}}),!e.sekretaris||e.sekretarisTemp&&e.sekretaris.user!==e.sekretarisTemp.id&&!e.isDuplicate(1)?[a("v-btn",{staticClass:"error",attrs:{disabled:e.assigning},on:{click:e.reset}},[e._v("batal")]),e.sekretarisTemp&&e.sekretarisTemp.id?a("v-btn",{staticClass:"primary",attrs:{loading:e.assigning},on:{click:function(t){return e.assignDosen("Sekretaris",e.sekretarisTemp.id)}}},[e._v("simpan")]):e._e()]:e._e()],2):e._e(),e.isDuplicate(1)?a("p",{staticClass:"red--text"},[e._v("Dosen ini telah didaftarkan menjadi Kepala Departemen.")]):e._e()]],2)},i=[],n=(a("7514"),a("96cf"),a("3b8d")),r={data:function(){return{dosen:[],loading:!1,search:null,search2:null,kadep:null,kadepTemp:null,sekretaris:null,sekretarisTemp:null,managers:null,editingKadep:!1,editingSekretaris:!1,loadManagers:!1,assigning:!1}},computed:{isDuplicate:function(){return function(e){if(0==e){if(this.kadepTemp&&this.kadepTemp.id&&this.sekretaris&&this.sekretaris.user)return this.kadepTemp.id==this.sekretaris.user}else if(1==e&&this.sekretarisTemp&&this.sekretarisTemp.id&&this.kadep&&this.kadep.user)return this.sekretarisTemp.id==this.kadep.user;return!1}}},methods:{fetchUser:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.$store.state.loadViewContent=!0,e.prev=1,e.next=4,this.$thessa.getAllDosen("page=all");case 4:return t=e.sent,this.dosen=t.data,e.next=8,this.fetchManagers();case 8:this.$store.state.loadViewContent=!1,e.next=15;break;case 11:e.prev=11,e.t0=e["catch"](1),this.$store.dispatch("showSnackbar",e.t0),this.$store.state.loadViewContent=!1;case 15:case"end":return e.stop()}},e,this,[[1,11]])}));function t(){return e.apply(this,arguments)}return t}(),assignDosen:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t,a){var s,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.assigning=!0,e.prev=1,e.next=4,this.$thessa.postManager({jabatan:t,user:a});case 4:s=e.sent,i=s.data,"Kepala Departemen"==i.jabatan?this.kadep=i:this.sekretaris=i,this.reset(),this.assigning=!1,this.$store.dispatch("showSnackbar",{message:"Berhasil mengubah data pengurus",type:"success"}),e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](1),this.$store.dispatch("showSnackbar",e.t0),this.assigning=!1;case 16:case"end":return e.stop()}},e,this,[[1,12]])}));function t(t,a){return e.apply(this,arguments)}return t}(),assignManagers:function(e){this.kadep=e.find(function(e){return"Kepala Departemen"==e.jabatan}),this.sekretaris=e.find(function(e){return"Sekretaris"==e.jabatan}),this.syncData()},syncData:function(){this.kadepTemp=this.kadep,this.sekretarisTemp=this.sekretaris},fetchManagers:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.loadManagers=!1,e.prev=1,e.next=4,this.$thessa.getManagers();case 4:t=e.sent,this.managers=t.data,this.assignManagers(t.data),this.loadManagers=!0,e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](1),this.loadManagers=!0,this.$store.dispatch("showSnackbar",e.t0);case 14:case"end":return e.stop()}},e,this,[[1,10]])}));function t(){return e.apply(this,arguments)}return t}(),editKadep:function(){this.editingKadep=!0},editSekretaris:function(){this.editingSekretaris=!0},reset:function(){this.editingKadep=!1,this.editingSekretaris=!1,this.kadepTemp=this.kadep,this.sekretarisTemp=this.sekretaris}},created:function(){this.fetchUser()}},c=r,p=(a("f25f"),a("2877")),o=a("6544"),d=a.n(o),u=a("c6a6"),l=a("8336"),h=a("132d"),k=a("a722"),m=Object(p["a"])(c,s,i,!1,null,null,null);t["default"]=m.exports;d()(m,{VAutocomplete:u["a"],VBtn:l["a"],VIcon:h["a"],VLayout:k["a"]})},f25f:function(e,t,a){"use strict";var s=a("6078"),i=a.n(s);i.a}}]);
//# sourceMappingURL=chunk-86b12d54.ca6b071b.js.map